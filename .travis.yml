services:
- docker
matrix:
  include:
  - language: go
    go:
    - 1.11.x
    before_script:
    - mv ../../XiaoMi ../../xiaomi
    - cd ../../xiaomi/naftis
    script:
    - make fmt lint vet build.api
  - language: node_js
    node_js:
    - 8
    script:
    - make build.ui
deploy:
  provider: releases
  skip_cleanup: true
  user: sevennt
  password:
    secure: Wr0SgV+THeLGs38QNFj8dpn7rzHA1bZ5RqRy5m195z/1XAsoFaDtMvGCbLk45RXgpaZpqIUhnIYT11PvO4VSM27jBCoIDMJujglsl5PyAIfD0okScGknJZEECBu2e6v3RTJ9Cj2CkRUWipi6NCKzx4rNMPFZtolf75tsARqN8yv/A3j748IWdebVZrmWlizTVbOfu5DA0i/1BS7dR9gAy4A3nLJ2JbhHXvFtJc/ziw79/xCVPSc4lW6nE/bpW1EcWZduLqBqyZqxzWbbqt7GNL2mCHTx8bytjTOhcnrzBFQVS719ZNROHdgRZJADVcKlSKb0BNwbqMLbUfQ/S2NxnGdRdjGsd1xgRDJgIB6VK1pkS+jpLH86ZX51fkiRUHRWpE0txCPM8VqCq1EHsYfEGvie0d/FmodkjhyqmxcnBgRKpZaE/FJR/xuXvz8yb4k8gqzJGxc//o4luZ7528BGRnuLEOq76qNm2pEAuVaK11fCaLcL61LjFKwLe9OWRwXSorNz8MLIK+GAm44b0hK2wMdC/6uI0ScJWqqVQ86Mo2qQLvOzZwHVqkEdHpQQAzvVVYMhEhlcNB3Mn1LlnDX+DehOr18B4hAnuHyLUIO+aKYDl6Qx3rpgMdZ97FQ7w6OoqLtw128yNWLpB6dHQO3rtzoOCkP5YOKuxgwUFlnV+Pc=
  script: make docker push release
  file:
  - logshare.linux.amd64
  on:
    tags: true
