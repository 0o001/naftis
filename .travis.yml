services:
- docker
matrix:
  include:
  - language: go
    go:
    - 1.11.x
    before_script:
    - mv ../../XiaoMi ../../xiaomi
    - cd ../../xiaomi/naftis
    script:
    - make fmt lint vet build.api
  - language: node_js
    node_js:
    - 8
    script:
    - make build.ui
deploy:
  provider: releases
  skip_cleanup: true
  script: make docker push release
  file:
  - logshare.linux.amd64
  on:
    tags: true
  user: sevennt
  api_key:
    secure: fo1XXDAb2ISbpJuXuEou5n6kyqxa0Z4cG073hDI4d5RtEH9ZCV3JI+AtgeCuvVKBF7RAjUbjKxaAP42+gZemBofmXCECNZvC2iOac5WyPchkPPyGTWj6cILXmM+A4SNymaSBsttyPH8Kny0YLH06QgmIX1UtGimCXoLebI+zAlxIC6Tr3Y2c5v6f3NOIB27PodIPmCWaIv5TYdyKmumLLg1filNwxkUmjz2mMvVFjb/7Exf/RLCYs1cGftCEBOAdZG2dSXl7zwgV7QaoUIsXuXGGQ6Xt5ENbdmgbuS0kzVvCCuqCId1a1zu453BdGNuucxEpSISp1kHMBE9GoQV7iVe1MsHbymJ718wlGSUHwuWZyYu0ZTQ/PG1vTa9urpDFqdimpMSIOXW+RSKOQCjWljas8QEMAExZDJp3vjnDFVaxpgP5fsmJHq1Ef/A5JiyMKh6xOdJruevwrb2Ky40ItoyOHI8hJ3SzSy/nWqKtUx6TQNPT2SPvz+nXSeTbqvnqH2p1tUQ6PWi5fYugFbOb5Tr7nPYzYi8SW1ol4IaxqsiC5rup784JK2WV+epzz5X/AbTf0gucNrnlWOCzdrH1RcLVxV5Xau57zCisxlPaFuN4pYCbGXWUVWHV5P4jnRD5JMtFMwmwf0FV5XA9vhdfW7m+oZ/LX2F792DBv47lCKw=
env:
  global:
    secure: fo1XXDAb2ISbpJuXuEou5n6kyqxa0Z4cG073hDI4d5RtEH9ZCV3JI+AtgeCuvVKBF7RAjUbjKxaAP42+gZemBofmXCECNZvC2iOac5WyPchkPPyGTWj6cILXmM+A4SNymaSBsttyPH8Kny0YLH06QgmIX1UtGimCXoLebI+zAlxIC6Tr3Y2c5v6f3NOIB27PodIPmCWaIv5TYdyKmumLLg1filNwxkUmjz2mMvVFjb/7Exf/RLCYs1cGftCEBOAdZG2dSXl7zwgV7QaoUIsXuXGGQ6Xt5ENbdmgbuS0kzVvCCuqCId1a1zu453BdGNuucxEpSISp1kHMBE9GoQV7iVe1MsHbymJ718wlGSUHwuWZyYu0ZTQ/PG1vTa9urpDFqdimpMSIOXW+RSKOQCjWljas8QEMAExZDJp3vjnDFVaxpgP5fsmJHq1Ef/A5JiyMKh6xOdJruevwrb2Ky40ItoyOHI8hJ3SzSy/nWqKtUx6TQNPT2SPvz+nXSeTbqvnqH2p1tUQ6PWi5fYugFbOb5Tr7nPYzYi8SW1ol4IaxqsiC5rup784JK2WV+epzz5X/AbTf0gucNrnlWOCzdrH1RcLVxV5Xau57zCisxlPaFuN4pYCbGXWUVWHV5P4jnRD5JMtFMwmwf0FV5XA9vhdfW7m+oZ/LX2F792DBv47lCKw=